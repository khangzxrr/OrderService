2023-03-16 00:04:28.263 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:04:28.311 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-16 00:04:28.314 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:04:28.315 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-16 00:04:28.333 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-16 00:04:28.345 +07:00 [INF] Applying migration '20230315170417_AddEmailToUser'.
2023-03-16 00:04:28.515 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [email] nvarchar(max) NOT NULL DEFAULT N'';
2023-03-16 00:04:28.517 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230315170417_AddEmailToUser', N'7.0.1');
2023-03-16 00:05:51.698 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:05:51.746 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-16 00:05:51.748 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:05:51.749 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-16 00:05:51.770 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-16 00:05:51.782 +07:00 [INF] Applying migration '20230315170543_AddUserConfiguration'.
2023-03-16 00:05:51.982 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'guid');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Users] ALTER COLUMN [guid] nvarchar(max) NOT NULL;
2023-03-16 00:05:52.001 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'email');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [email] nvarchar(100) NOT NULL;
2023-03-16 00:05:52.003 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230315170543_AddUserConfiguration', N'7.0.1');
2023-03-16 00:06:31.378 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:06:31.452 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:06:31.707 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:06:31.720 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:06:31.987 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:06:31.990 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:06:31.992 +07:00 [INF] Hosting environment: Development
2023-03-16 00:06:31.993 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:06:32.670 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:06:32.755 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:07:33.869 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:07:33.980 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:07:34.424 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:07:34.461 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:07:34.898 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:07:34.903 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:07:34.904 +07:00 [INF] Hosting environment: Development
2023-03-16 00:07:34.905 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:07:35.582 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:07:35.655 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:07:35.900 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 319.7248ms
2023-03-16 00:07:35.971 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:07:35.979 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:07:35.995 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 15.4819ms
2023-03-16 00:07:36.013 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 42.0054ms
2023-03-16 00:07:36.129 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/favicon-32x32.png - -
2023-03-16 00:07:36.143 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-03-16 00:07:36.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/favicon-32x32.png - - - 0 628 image/png 16.2147ms
2023-03-16 00:07:36.236 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:07:36.457 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 221.6905ms
2023-03-16 00:07:40.404 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/Login application/json 50
2023-03-16 00:07:40.407 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:07:40.409 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:07:40.413 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:07:40.440 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin (OrderService.Web).
2023-03-16 00:07:40.456 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web) in 5.1725ms
2023-03-16 00:07:40.466 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:07:40.470 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'OrderService.Core.Interfaces.IAuthenticationService' while attempting to activate 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method373(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-16 00:07:40.530 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/Login application/json 50 - 500 - text/plain;+charset=utf-8 126.2313ms
2023-03-16 00:10:05.694 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:10:05.838 +07:00 [INF] Executed DbCommand (69ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:10:06.092 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:10:06.106 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:10:06.377 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:10:06.534 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:10:06.537 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:10:06.538 +07:00 [INF] Hosting environment: Development
2023-03-16 00:10:06.540 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:10:07.397 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:10:07.478 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:10:37.366 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:10:37.459 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:10:37.690 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:10:37.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:10:37.884 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:10:38.034 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:10:38.038 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:10:38.039 +07:00 [INF] Hosting environment: Development
2023-03-16 00:10:38.041 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:10:38.755 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:10:38.818 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:10:39.172 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 420.2805ms
2023-03-16 00:10:39.239 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:10:39.243 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:10:39.246 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 7.0588ms
2023-03-16 00:10:39.292 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 49.0880ms
2023-03-16 00:10:39.544 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:10:39.795 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 250.9962ms
2023-03-16 00:10:42.547 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/Login application/json 50
2023-03-16 00:10:42.552 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:10:42.554 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:10:42.559 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:10:42.592 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin (OrderService.Web).
2023-03-16 00:10:42.610 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web) in 2.3973ms
2023-03-16 00:10:42.617 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:10:42.638 +07:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'OrderService.Core.Interfaces.IAuthenticationService' while attempting to activate 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, Boolean isDefaultParameterRequired)
   at lambda_method418(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-16 00:10:42.711 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/Login application/json 50 - 500 - text/plain;+charset=utf-8 163.8545ms
2023-03-16 00:11:33.937 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:11:34.011 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:11:34.258 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:11:34.272 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:11:34.484 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:11:34.642 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:11:34.657 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:11:34.658 +07:00 [INF] Hosting environment: Development
2023-03-16 00:11:34.660 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:11:35.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:11:35.142 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:11:35.413 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 344.2914ms
2023-03-16 00:11:35.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:11:35.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:11:35.488 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.8699ms
2023-03-16 00:11:35.534 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 60.1930ms
2023-03-16 00:11:35.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:11:35.978 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 194.6474ms
2023-03-16 00:11:39.181 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/Login application/json 50
2023-03-16 00:11:39.187 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:11:39.189 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:11:39.195 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:11:39.229 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin (OrderService.Web).
2023-03-16 00:11:39.708 +07:00 [INF] Executed DbCommand (93ms) [Parameters=[@__email_0='?' (Size = 100), @__password_1='?' (Size = 300)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[address], [u].[dateOfBirth], [u].[email], [u].[firstname], [u].[guid], [u].[lastname], [u].[passwordHash], [u].[passwordSalt], [u].[roleId], [u].[verify], [r].[Id], [r].[roleName]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[roleId] = [r].[Id]
WHERE [u].[email] = @__email_0 AND [u].[passwordHash] = @__password_1
2023-03-16 00:11:39.883 +07:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2023-03-16 00:11:39.891 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web) in 654.3953ms
2023-03-16 00:11:39.895 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:11:39.904 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/Login application/json 50 - 404 - text/plain;+charset=utf-8 722.3991ms
2023-03-16 00:12:14.433 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:12:14.514 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:12:14.765 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:12:14.781 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:12:14.974 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:12:15.127 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:12:15.130 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:12:15.132 +07:00 [INF] Hosting environment: Development
2023-03-16 00:12:15.133 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:12:15.573 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:12:15.674 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:12:16.014 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 443.2459ms
2023-03-16 00:12:16.144 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:12:16.145 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:12:16.169 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 24.0037ms
2023-03-16 00:12:16.202 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 58.2974ms
2023-03-16 00:12:16.631 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:12:16.865 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 234.7160ms
2023-03-16 00:12:35.800 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/register application/json 174
2023-03-16 00:12:35.805 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:12:35.807 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:12:35.810 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:12:35.833 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenRegister"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister (OrderService.Web).
2023-03-16 00:12:36.129 +07:00 [INF] Executed DbCommand (48ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[address], [u].[dateOfBirth], [u].[email], [u].[firstname], [u].[guid], [u].[lastname], [u].[passwordHash], [u].[passwordSalt], [u].[roleId], [u].[verify]
FROM [Users] AS [u]
WHERE [u].[firstname] = @__email_0
2023-03-16 00:12:36.411 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 300), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 100), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 300), @p7='?' (Size = 100), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([address], [dateOfBirth], [email], [firstname], [guid], [lastname], [passwordHash], [passwordSalt], [roleId], [verify])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2023-03-16 00:12:36.460 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'OrderService.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'guid', table 'OrderService.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f4fb3f36-0b19-472e-a28a-2495767db890
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'guid', table 'OrderService.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f4fb3f36-0b19-472e-a28a-2495767db890
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-03-16 00:12:36.841 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web) in 1000.3676ms
2023-03-16 00:12:36.849 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:12:36.855 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'guid', table 'OrderService.dbo.Users'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:f4fb3f36-0b19-472e-a28a-2495767db890
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OrderService.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\OrderService\src\OrderService.Infrastructure\Data\AppDbContext.cs:line 40
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at OrderService.Core.Services.AuthenticationService.CreateNewUserAsync(String email, String password, String firstName, String lastName, DateTime dateofbirth, String address) in D:\OrderService\src\OrderService.Core\Services\AuthenticationService.cs:line 75
   at OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync(RegisterRequest request, CancellationToken cancellationToken) in D:\OrderService\src\OrderService.Web\Endpoints\AuthenticationEndpoints\Register.cs:line 36
   at lambda_method415(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-16 00:12:37.000 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/register application/json 174 - 500 - text/plain;+charset=utf-8 1199.3275ms
2023-03-16 00:13:37.486 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:13:37.579 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:13:37.839 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:13:37.853 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:13:38.049 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:13:38.193 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:13:38.196 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:13:38.197 +07:00 [INF] Hosting environment: Development
2023-03-16 00:13:38.199 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:13:38.655 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:13:38.731 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:13:39.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 366.5840ms
2023-03-16 00:13:39.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:13:39.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:13:39.094 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 13.4844ms
2023-03-16 00:13:39.140 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 57.4122ms
2023-03-16 00:13:39.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:13:39.626 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 261.5262ms
2023-03-16 00:13:45.996 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/register application/json 174
2023-03-16 00:13:46.001 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:13:46.002 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:13:46.006 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:13:46.030 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenRegister"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister (OrderService.Web).
2023-03-16 00:13:46.334 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[address], [u].[dateOfBirth], [u].[email], [u].[firstname], [u].[guid], [u].[lastname], [u].[passwordHash], [u].[passwordSalt], [u].[roleId], [u].[verify]
FROM [Users] AS [u]
WHERE [u].[firstname] = @__email_0
2023-03-16 00:13:46.555 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (Size = 300), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 100), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 300), @p7='?' (Size = 100), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([address], [dateOfBirth], [email], [firstname], [guid], [lastname], [passwordHash], [passwordSalt], [roleId], [verify])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2023-03-16 00:13:46.601 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'OrderService.Infrastructure.Data.AppDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Roles_roleId". The conflict occurred in database "OrderService", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:dd63bcc7-9af2-4cb3-9006-42d08472b3c0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Roles_roleId". The conflict occurred in database "OrderService", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:dd63bcc7-9af2-4cb3-9006-42d08472b3c0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2023-03-16 00:13:46.932 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web) in 891.0243ms
2023-03-16 00:13:46.936 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:13:46.940 +07:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_Users_Roles_roleId". The conflict occurred in database "OrderService", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:dd63bcc7-9af2-4cb3-9006-42d08472b3c0
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at OrderService.Infrastructure.Data.AppDbContext.SaveChangesAsync(CancellationToken cancellationToken) in D:\OrderService\src\OrderService.Infrastructure\Data\AppDbContext.cs:line 40
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.SaveChangesAsync(CancellationToken cancellationToken)
   at Ardalis.Specification.EntityFrameworkCore.RepositoryBase`1.AddAsync(T entity, CancellationToken cancellationToken)
   at OrderService.Core.Services.AuthenticationService.CreateNewUserAsync(String email, String password, String firstName, String lastName, DateTime dateofbirth, String address) in D:\OrderService\src\OrderService.Core\Services\AuthenticationService.cs:line 75
   at OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync(RegisterRequest request, CancellationToken cancellationToken) in D:\OrderService\src\OrderService.Web\Endpoints\AuthenticationEndpoints\Register.cs:line 36
   at lambda_method415(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Ardalis.ListStartupServices.ShowAllServicesMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2023-03-16 00:13:47.055 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/register application/json 174 - 500 - text/plain;+charset=utf-8 1058.9931ms
2023-03-16 00:18:05.502 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-16 00:18:05.586 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-16 00:18:05.895 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Roles] AS [r]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:18:05.910 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CurrencyExchanges] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-16 00:18:06.114 +07:00 [INF] User profile is available. Using 'C:\Users\khang\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-03-16 00:18:06.267 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-16 00:18:06.271 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-16 00:18:06.272 +07:00 [INF] Hosting environment: Development
2023-03-16 00:18:06.274 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-16 00:18:06.683 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-16 00:18:06.778 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-16 00:18:07.129 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 452.4709ms
2023-03-16 00:18:07.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_vs/browserLink - -
2023-03-16 00:18:07.240 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-16 00:18:07.253 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 12.2714ms
2023-03-16 00:18:07.264 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 23.8341ms
2023-03-16 00:18:07.575 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-16 00:18:07.794 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 218.3447ms
2023-03-16 00:18:12.749 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/register application/json 174
2023-03-16 00:18:12.753 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:18:12.755 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:18:12.761 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:18:12.787 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenRegister"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister (OrderService.Web).
2023-03-16 00:18:13.061 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__email_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[address], [u].[dateOfBirth], [u].[email], [u].[firstname], [u].[guid], [u].[lastname], [u].[passwordHash], [u].[passwordSalt], [u].[roleId], [u].[verify]
FROM [Users] AS [u]
WHERE [u].[firstname] = @__email_0
2023-03-16 00:18:13.099 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToString_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[roleName]
FROM [Roles] AS [r]
WHERE [r].[roleName] = @__ToString_0
2023-03-16 00:18:13.308 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 300), @p1='?' (DbType = DateTime2), @p2='?' (Size = 100), @p3='?' (Size = 100), @p4='?' (Size = 4000), @p5='?' (Size = 100), @p6='?' (Size = 300), @p7='?' (Size = 100), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([address], [dateOfBirth], [email], [firstname], [guid], [lastname], [passwordHash], [passwordSalt], [roleId], [verify])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2023-03-16 00:18:13.670 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderService.Web.Endpoints.AuthenticationEndpoints.RegisterResponse'.
2023-03-16 00:18:13.680 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web) in 883.3195ms
2023-03-16 00:18:13.689 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRegister.HandleAsync (OrderService.Web)'
2023-03-16 00:18:13.697 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/register application/json 174 - 200 - application/json;+charset=utf-8 947.8728ms
2023-03-16 00:18:51.336 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:57679/Login application/json 57
2023-03-16 00:18:51.339 +07:00 [INF] CORS policy execution failed.
2023-03-16 00:18:51.341 +07:00 [INF] Request origin http://localhost:57679 does not have permission to access the resource.
2023-03-16 00:18:51.343 +07:00 [INF] Executing endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:18:51.350 +07:00 [INF] Route matched with {action = "Handle", controller = "AuthenLogin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenResponse]] HandleAsync(OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenRequest, System.Threading.CancellationToken) on controller OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin (OrderService.Web).
2023-03-16 00:18:51.426 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__email_0='?' (Size = 100), @__password_1='?' (Size = 300)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[address], [u].[dateOfBirth], [u].[email], [u].[firstname], [u].[guid], [u].[lastname], [u].[passwordHash], [u].[passwordSalt], [u].[roleId], [u].[verify], [r].[Id], [r].[roleName]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[roleId] = [r].[Id]
WHERE [u].[email] = @__email_0 AND [u].[passwordHash] = @__password_1
2023-03-16 00:18:51.475 +07:00 [INF] Executing OkObjectResult, writing value of type 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenResponse'.
2023-03-16 00:18:51.487 +07:00 [INF] Executed action OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web) in 131.587ms
2023-03-16 00:18:51.495 +07:00 [INF] Executed endpoint 'OrderService.Web.Endpoints.AuthenticationEndpoints.AuthenLogin.HandleAsync (OrderService.Web)'
2023-03-16 00:18:51.503 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:57679/Login application/json 57 - 200 - application/json;+charset=utf-8 167.1596ms
