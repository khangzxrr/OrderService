2023-03-10 13:52:07.955 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:52:08.064 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']

IF EXISTS
    (SELECT *
     FROM [sys].[objects] o
     WHERE [o].[type] = 'U'
     AND [o].[is_ms_shipped] = 0
     AND NOT EXISTS (SELECT *
         FROM [sys].[extended_properties] AS [ep]
         WHERE [ep].[major_id] = [o].[object_id]
             AND [ep].[minor_id] = 0
             AND [ep].[class] = 1
             AND [ep].[name] = N'microsoft_database_tools_support'
    )
)
SELECT 1 ELSE SELECT 0
2023-03-10 13:52:08.170 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 13:52:08.174 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 13:52:08.179 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 13:52:08.184 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 13:52:08.444 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [ToDoItems] AS [t]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2023-03-10 13:52:08.506 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [p].[Priority]
FROM [Projects] AS [p]
2023-03-10 13:52:08.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[ContributorId], [t].[Description], [t].[IsDone], [t].[ProjectId], [t].[Title]
FROM [ToDoItems] AS [t]
2023-03-10 13:52:08.522 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[Name]
FROM [Contributors] AS [c]
2023-03-10 13:52:08.784 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [Contributors] USING (
VALUES (@p0, 0),
(@p1, 1)) AS i ([Name], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Name])
VALUES (i.[Name])
OUTPUT INSERTED.[Id], i._Position;
2023-03-10 13:52:08.899 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Projects] ([Name], [Priority])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2023-03-10 13:52:08.918 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (Size = 4000), @p7='?' (DbType = Int32), @p8='?' (Size = 4000), @p9='?' (DbType = Boolean), @p10='?' (DbType = Int32), @p11='?' (Size = 4000), @p12='?' (DbType = Int32), @p13='?' (Size = 4000), @p14='?' (DbType = Boolean), @p15='?' (DbType = Int32), @p16='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [ToDoItems] USING (
VALUES (@p2, @p3, @p4, @p5, @p6, 0),
(@p7, @p8, @p9, @p10, @p11, 1),
(@p12, @p13, @p14, @p15, @p16, 2)) AS i ([ContributorId], [Description], [IsDone], [ProjectId], [Title], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([ContributorId], [Description], [IsDone], [ProjectId], [Title])
VALUES (i.[ContributorId], i.[Description], i.[IsDone], i.[ProjectId], i.[Title])
OUTPUT INSERTED.[Id], i._Position;
2023-03-10 13:52:09.105 +07:00 [INF] Now listening on: http://localhost:57679
2023-03-10 13:52:09.108 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2023-03-10 13:52:09.110 +07:00 [INF] Hosting environment: Development
2023-03-10 13:52:09.111 +07:00 [INF] Content root path: D:\OrderService\src\OrderService.Web
2023-03-10 13:52:09.692 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/ - -
2023-03-10 13:52:09.751 +07:00 [WRN] Failed to determine the https port for redirect.
2023-03-10 13:52:09.782 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/ - - - 404 0 - 91.1876ms
2023-03-10 13:52:12.103 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/index.html - -
2023-03-10 13:52:12.217 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/index.html - - - 200 - text/html;charset=utf-8 113.7117ms
2023-03-10 13:52:12.228 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - -
2023-03-10 13:52:12.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/_framework/aspnetcore-browser-refresh.js - - - 200 12002 application/javascript;+charset=utf-8 3.6766ms
2023-03-10 13:52:12.409 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - -
2023-03-10 13:52:12.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:57679/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 101.6711ms
2023-03-10 13:54:17.914 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:54:17.966 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:54:17.968 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:54:18.049 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 13:54:18.050 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:54:18.051 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:54:18.060 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 13:54:18.073 +07:00 [INF] Applying migration '20230310065317_InitUser'.
2023-03-10 13:54:18.142 +07:00 [ERR] Failed executing DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 13:55:27.801 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:55:27.850 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:55:27.852 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:55:27.853 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:55:27.867 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 13:55:27.880 +07:00 [INF] Applying migration '20230310065317_InitUser'.
2023-03-10 13:55:27.956 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 13:55:57.777 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:55:57.827 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:55:57.828 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:55:57.902 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 13:55:57.904 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:55:57.905 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:55:57.909 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 13:55:57.921 +07:00 [INF] No migrations were applied. The database is already up to date.
2023-03-10 13:56:14.354 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:56:14.403 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:56:14.405 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 13:56:14.406 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 13:56:14.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 13:56:14.432 +07:00 [INF] Applying migration '20230310065607_InitUser'.
2023-03-10 13:56:14.493 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 13:56:14.494 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 13:56:14.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 13:56:14.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 13:56:14.498 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310065607_InitUser', N'7.0.1');
2023-03-10 14:11:12.530 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 14:11:12.582 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 14:11:12.584 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 14:11:12.585 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 14:11:12.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 14:11:12.617 +07:00 [INF] Applying migration '20230310070441_InitUserEntity'.
2023-03-10 14:11:12.695 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [passwordHash] nvarchar(max) NOT NULL,
    [passwordSalt] nvarchar(max) NOT NULL,
    [firstname] nvarchar(max) NOT NULL,
    [lastname] nvarchar(max) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(max) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 14:11:12.696 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310070441_InitUserEntity', N'7.0.1');
2023-03-10 14:11:12.701 +07:00 [INF] Applying migration '20230310070830_InitUserEntity2'.
2023-03-10 14:11:12.726 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Users] ADD [guid] nvarchar(max) NOT NULL DEFAULT N'';
2023-03-10 14:11:12.727 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310070830_InitUserEntity2', N'7.0.1');
2023-03-10 14:11:12.727 +07:00 [INF] Applying migration '20230310071045_InitUserEntity3'.
2023-03-10 14:11:12.782 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'passwordSalt');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Users] ALTER COLUMN [passwordSalt] nvarchar(100) NOT NULL;
2023-03-10 14:11:12.798 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'passwordHash');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Users] ALTER COLUMN [passwordHash] nvarchar(300) NOT NULL;
2023-03-10 14:11:12.815 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'lastname');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Users] ALTER COLUMN [lastname] nvarchar(100) NOT NULL;
2023-03-10 14:11:12.834 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'guid');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Users] ALTER COLUMN [guid] nvarchar(100) NOT NULL;
2023-03-10 14:11:12.850 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var4 sysname;
SELECT @var4 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'firstname');
IF @var4 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var4 + '];');
ALTER TABLE [Users] ALTER COLUMN [firstname] nvarchar(100) NOT NULL;
2023-03-10 14:11:12.868 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var5 sysname;
SELECT @var5 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Users]') AND [c].[name] = N'address');
IF @var5 IS NOT NULL EXEC(N'ALTER TABLE [Users] DROP CONSTRAINT [' + @var5 + '];');
ALTER TABLE [Users] ALTER COLUMN [address] nvarchar(300) NOT NULL;
2023-03-10 14:11:12.868 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310071045_InitUserEntity3', N'7.0.1');
2023-03-10 15:08:26.207 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 15:08:26.268 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 15:08:26.271 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 15:08:26.272 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 15:08:26.290 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 15:08:26.303 +07:00 [INF] Applying migration '20230310080816_ordersOfuser'.
2023-03-10 15:08:26.404 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [customerId] int NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 15:08:26.407 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 15:08:26.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 15:08:26.408 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 15:08:26.409 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310080816_ordersOfuser', N'7.0.1');
2023-03-10 15:10:43.614 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 15:10:43.663 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 15:10:43.666 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 15:10:43.668 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 15:10:43.683 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 15:10:43.696 +07:00 [INF] Applying migration '20230310081037_removeCustomerIdFromOrder'.
2023-03-10 15:10:43.783 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Order]') AND [c].[name] = N'customerId');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Order] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Order] DROP COLUMN [customerId];
2023-03-10 15:10:43.784 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310081037_removeCustomerIdFromOrder', N'7.0.1');
2023-03-10 16:25:13.140 +07:00 [WRN] The foreign key property 'ProductShipCost.productCategoryId1' was created in shadow state because a conflicting property with the simple name 'productCategoryId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-03-10 16:25:13.461 +07:00 [WRN] The foreign key property 'ProductShipCost.productCategoryId1' was created in shadow state because a conflicting property with the simple name 'productCategoryId' exists in the entity type, but is either not mapped, is already used for another relationship, or is incompatible with the associated primary key type. See https://aka.ms/efcore-relationships for information on mapping relationships in EF Core.
2023-03-10 16:30:02.964 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:30:03.017 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:30:03.020 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:30:03.021 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:30:03.035 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:30:03.051 +07:00 [INF] Applying migration '20230310092947_AddProduct'.
2023-03-10 16:30:03.157 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductShipCost] DROP CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId1];
2023-03-10 16:30:44.614 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:30:44.667 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:30:44.670 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:30:44.740 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 16:30:44.741 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:30:44.742 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:30:44.745 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:30:44.761 +07:00 [INF] Applying migration '20230310093037_AddProduct'.
2023-03-10 16:30:44.876 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:30:44.878 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:30:44.880 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:30:44.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:30:44.883 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:30:44.893 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryForeignKey] int NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey] FOREIGN KEY ([productCategoryForeignKey]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:32:55.690 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:32:55.735 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:32:55.737 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:32:55.738 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:32:55.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:32:55.760 +07:00 [INF] Applying migration '20230310093037_AddProduct'.
2023-03-10 16:32:55.866 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:32:55.868 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:32:55.869 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:32:55.870 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:32:55.872 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:32:55.880 +07:00 [ERR] Failed executing DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryForeignKey] int NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey] FOREIGN KEY ([productCategoryForeignKey]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:33:21.972 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:33:22.025 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:33:22.027 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:33:22.091 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 16:33:22.092 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:33:22.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:33:22.097 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:33:22.107 +07:00 [INF] No migrations were applied. The database is already up to date.
2023-03-10 16:33:45.124 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:33:45.171 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:33:45.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:33:45.173 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:33:45.187 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:33:45.204 +07:00 [INF] Applying migration '20230310093339_AddProduct'.
2023-03-10 16:33:45.329 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:33:45.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:33:45.331 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:33:45.333 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:33:45.335 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:33:45.337 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryForeignKey] int NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey] FOREIGN KEY ([productCategoryForeignKey]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:33:45.339 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 16:33:45.342 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 16:33:45.355 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] real NOT NULL,
    [productSellerEmail] real NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] nvarchar(max) NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] nvarchar(max) NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:35:13.030 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:35:13.081 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:35:13.083 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:35:13.084 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:35:13.098 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:35:13.111 +07:00 [INF] Applying migration '20230310093339_AddProduct'.
2023-03-10 16:35:13.226 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:35:13.227 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:35:13.228 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:35:13.229 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:35:13.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:35:13.232 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryForeignKey] int NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey] FOREIGN KEY ([productCategoryForeignKey]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:35:13.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 16:35:13.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 16:35:13.245 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] real NOT NULL,
    [productSellerEmail] real NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] nvarchar(max) NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] nvarchar(max) NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:35:37.159 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:35:37.217 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:35:37.219 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:35:37.221 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:35:37.241 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:35:37.258 +07:00 [INF] Applying migration '20230310093528_AddProduct'.
2023-03-10 16:35:37.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:35:37.401 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:35:37.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:35:37.404 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:35:37.406 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:35:37.408 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryForeignKey] int NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey] FOREIGN KEY ([productCategoryForeignKey]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE
);
2023-03-10 16:35:37.410 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 16:35:37.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 16:35:37.414 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] real NOT NULL,
    [productSellerEmail] real NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] nvarchar(max) NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] nvarchar(max) NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 16:35:37.562 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 16:35:37.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 16:35:37.564 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 16:35:37.565 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 16:35:37.567 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 16:35:37.568 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 16:35:37.569 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryForeignKey] ON [ProductShipCost] ([productCategoryForeignKey]);
2023-03-10 16:35:37.570 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 16:35:37.571 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 16:35:37.573 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310093528_AddProduct', N'7.0.1');
2023-03-10 16:47:27.315 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:47:27.366 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:47:27.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:47:27.368 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:47:27.388 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:47:27.401 +07:00 [INF] Applying migration '20230310094721_AddProduct2'.
2023-03-10 16:47:27.492 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductShipCost] DROP CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryForeignKey];
2023-03-10 16:47:27.493 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductShipCost] DROP CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId];
2023-03-10 16:47:27.495 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_ProductShipCost_productCategoryForeignKey] ON [ProductShipCost];
2023-03-10 16:47:27.496 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost];
2023-03-10 16:47:27.512 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ProductShipCost]') AND [c].[name] = N'productCategoryForeignKey');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [ProductShipCost] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [ProductShipCost] DROP COLUMN [productCategoryForeignKey];
2023-03-10 16:47:27.513 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 16:47:27.514 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductShipCost] ADD CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION;
2023-03-10 16:47:27.515 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310094721_AddProduct2', N'7.0.1');
2023-03-10 16:48:50.696 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:48:50.747 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:48:50.749 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:48:50.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 16:48:50.807 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 16:48:50.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 16:48:50.812 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 16:48:50.822 +07:00 [INF] Applying migration '20230310094844_AddProduct2'.
2023-03-10 16:48:50.908 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 16:48:50.909 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 16:48:50.910 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 16:48:50.911 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 16:48:50.912 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 16:48:50.913 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 16:48:50.915 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 16:48:50.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 16:48:50.918 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] real NOT NULL,
    [productSellerEmail] real NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] nvarchar(max) NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] nvarchar(max) NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 16:48:52.022 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 16:48:52.023 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 16:48:52.024 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 16:48:52.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 16:48:52.026 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 16:48:52.027 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 16:48:52.028 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 16:48:52.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 16:48:52.030 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310094844_AddProduct2', N'7.0.1');
2023-03-10 17:08:25.765 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:08:25.826 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:08:25.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:08:25.830 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:08:25.845 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:08:25.860 +07:00 [INF] Applying migration '20230310100817_AddProductHistories'.
2023-03-10 17:08:26.004 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productName] nvarchar(max) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] nvarchar(max) NOT NULL,
    [productSellerEmail] nvarchar(max) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productReturnable] bit NOT NULL,
    [ProductId] int NULL,
    CONSTRAINT [PK_ProductHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductHistory_Product_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Product] ([Id])
);
2023-03-10 17:08:26.006 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_ProductId] ON [ProductHistory] ([ProductId]);
2023-03-10 17:08:26.006 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310100817_AddProductHistories', N'7.0.1');
2023-03-10 17:15:09.706 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:15:09.755 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:15:09.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:15:09.758 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:15:09.772 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:15:09.786 +07:00 [INF] Applying migration '20230310101503_UpdateProductHistories'.
2023-03-10 17:15:09.891 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD [productReturnDescription] nvarchar(max) NOT NULL DEFAULT N'';
2023-03-10 17:15:09.893 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD [productReturnDuration] int NOT NULL DEFAULT 0;
2023-03-10 17:15:09.894 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD [productWarrantyDuration] int NOT NULL DEFAULT 0;
2023-03-10 17:15:09.911 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Product]') AND [c].[name] = N'productWarrantyDuration');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [Product] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [Product] ALTER COLUMN [productWarrantyDuration] int NOT NULL;
2023-03-10 17:15:09.927 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Product]') AND [c].[name] = N'productSellerEmail');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [Product] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [Product] ALTER COLUMN [productSellerEmail] nvarchar(200) NOT NULL;
2023-03-10 17:15:09.943 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var2 sysname;
SELECT @var2 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Product]') AND [c].[name] = N'productSellerAddress');
IF @var2 IS NOT NULL EXEC(N'ALTER TABLE [Product] DROP CONSTRAINT [' + @var2 + '];');
ALTER TABLE [Product] ALTER COLUMN [productSellerAddress] nvarchar(200) NOT NULL;
2023-03-10 17:15:09.959 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var3 sysname;
SELECT @var3 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[Product]') AND [c].[name] = N'productReturnDuration');
IF @var3 IS NOT NULL EXEC(N'ALTER TABLE [Product] DROP CONSTRAINT [' + @var3 + '];');
ALTER TABLE [Product] ALTER COLUMN [productReturnDuration] int NOT NULL;
2023-03-10 17:15:09.960 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310101503_UpdateProductHistories', N'7.0.1');
2023-03-10 17:24:37.084 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:24:37.139 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:24:37.142 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:24:37.143 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:24:37.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:24:37.180 +07:00 [INF] Applying migration '20230310102423_Addtaxs'.
2023-03-10 17:24:37.301 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 17:24:37.303 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductProductTax] (
    [ProductsId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([ProductsId], [productTaxesId]),
    CONSTRAINT [FK_ProductProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductProductTax_Product_ProductsId] FOREIGN KEY ([ProductsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE
);
2023-03-10 17:24:37.304 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productTaxesId] ON [ProductProductTax] ([productTaxesId]);
2023-03-10 17:24:37.305 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310102423_Addtaxs', N'7.0.1');
2023-03-10 17:31:27.279 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:31:27.335 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:31:27.338 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:31:27.338 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:31:27.354 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:31:27.368 +07:00 [INF] Applying migration '20230310103120_AddtaxsToHistories'.
2023-03-10 17:31:27.497 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductProductTax] DROP CONSTRAINT [FK_ProductProductTax_Product_ProductsId];
2023-03-10 17:31:27.501 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductProductTax] DROP CONSTRAINT [PK_ProductProductTax];
2023-03-10 17:31:27.502 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_ProductProductTax_productTaxesId] ON [ProductProductTax];
2023-03-10 17:31:27.713 +07:00 [INF] Executed DbCommand (211ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
EXEC sp_rename N'[ProductProductTax].[ProductsId]', N'productsId', N'COLUMN';
2023-03-10 17:31:27.730 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var0 sysname;
SELECT @var0 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[ProductTax]') AND [c].[name] = N'taxName');
IF @var0 IS NOT NULL EXEC(N'ALTER TABLE [ProductTax] DROP CONSTRAINT [' + @var0 + '];');
ALTER TABLE [ProductTax] ALTER COLUMN [taxName] nvarchar(100) NOT NULL;
2023-03-10 17:31:27.732 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductProductTax] ADD CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([productTaxesId], [productsId]);
2023-03-10 17:31:27.735 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistoryProductTax] (
    [productHistoriesId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductHistoryProductTax] PRIMARY KEY ([productHistoriesId], [productTaxesId]),
    CONSTRAINT [FK_ProductHistoryProductTax_ProductHistory_productHistoriesId] FOREIGN KEY ([productHistoriesId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistoryProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE
);
2023-03-10 17:31:27.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productsId] ON [ProductProductTax] ([productsId]);
2023-03-10 17:31:27.737 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistoryProductTax_productTaxesId] ON [ProductHistoryProductTax] ([productTaxesId]);
2023-03-10 17:31:27.738 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductProductTax] ADD CONSTRAINT [FK_ProductProductTax_Product_productsId] FOREIGN KEY ([productsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE;
2023-03-10 17:31:27.739 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310103120_AddtaxsToHistories', N'7.0.1');
2023-03-10 17:35:56.183 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:35:56.233 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:35:56.235 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:35:56.236 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:35:56.250 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:35:56.264 +07:00 [INF] Applying migration '20230310103534_AddCategoryAndShipCostToHistories'.
2023-03-10 17:35:56.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productCategoryId] ON [ProductHistory] ([productCategoryId]);
2023-03-10 17:35:56.381 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productShipCostId] ON [ProductHistory] ([productShipCostId]);
2023-03-10 17:35:56.383 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD CONSTRAINT [FK_ProductHistory_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE;
2023-03-10 17:35:56.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD CONSTRAINT [FK_ProductHistory_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE;
2023-03-10 17:35:56.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310103534_AddCategoryAndShipCostToHistories', N'7.0.1');
2023-03-10 17:41:29.361 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:41:29.418 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:41:29.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:41:29.420 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:41:29.433 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:41:29.447 +07:00 [INF] Applying migration '20230310104111_AddChangeDatesToHistory'.
2023-03-10 17:41:29.560 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD [changeDate] datetime2 NOT NULL DEFAULT '0001-01-01T00:00:00.0000000';
2023-03-10 17:41:29.561 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310104111_AddChangeDatesToHistory', N'7.0.1');
2023-03-10 17:44:51.309 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:44:51.362 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:44:51.365 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:44:51.365 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:44:51.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:44:51.393 +07:00 [INF] Applying migration '20230310104443_AddTaxPrice'.
2023-03-10 17:44:51.506 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductTax] ADD [taxPrice] real NOT NULL DEFAULT CAST(0 AS real);
2023-03-10 17:44:51.507 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310104443_AddTaxPrice', N'7.0.1');
2023-03-10 17:57:31.308 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:57:31.366 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:57:31.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 17:57:31.369 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 17:57:31.383 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 17:57:31.396 +07:00 [INF] Applying migration '20230310104821_AddCurrencyExchange'.
2023-03-10 17:57:31.515 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD [currencyExchangeId] int NOT NULL DEFAULT 0;
2023-03-10 17:57:31.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_currencyExchangeId] ON [ProductHistory] ([currencyExchangeId]);
2023-03-10 17:57:31.517 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [ProductHistory] ADD CONSTRAINT [FK_ProductHistory_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE;
2023-03-10 17:57:31.518 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310104821_AddCurrencyExchange', N'7.0.1');
2023-03-10 17:57:31.523 +07:00 [INF] Applying migration '20230310105724_AddOrderDetail'.
2023-03-10 17:57:31.626 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 17:57:31.629 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetail] (
    [Id] int NOT NULL IDENTITY,
    [productId] int NOT NULL,
    [additionalCostId] int NOT NULL,
    [processCost] real NOT NULL,
    [quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderDetail_AdditionalCost_additionalCostId] FOREIGN KEY ([additionalCostId]) REFERENCES [AdditionalCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetail_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id]),
    CONSTRAINT [FK_OrderDetail_ProductHistory_productId] FOREIGN KEY ([productId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE
);
2023-03-10 17:57:31.629 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_additionalCostId] ON [OrderDetail] ([additionalCostId]);
2023-03-10 17:57:31.630 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_OrderId] ON [OrderDetail] ([OrderId]);
2023-03-10 17:57:31.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_productId] ON [OrderDetail] ([productId]);
2023-03-10 17:57:31.631 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310105724_AddOrderDetail', N'7.0.1');
2023-03-10 18:19:09.417 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:19:09.475 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:19:09.477 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:19:09.478 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:19:09.491 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:19:09.506 +07:00 [INF] Applying migration '20230310111857_AddReturnProductsAndPayments'.
2023-03-10 18:19:09.647 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductReturn] (
    [Id] int NOT NULL IDENTITY,
    [isExchangeForNewProduct] bit NOT NULL,
    [returnQuantity] int NOT NULL,
    [returnReason] nvarchar(max) NOT NULL,
    [customerMessage] nvarchar(max) NOT NULL,
    [supplierMessage] nvarchar(max) NOT NULL,
    [shippingStatus] int NOT NULL,
    [shippingEstimatedDay] int NOT NULL,
    [returnCost] real NOT NULL,
    [returnDate] datetime2 NOT NULL,
    [OrderDetailId] int NULL,
    CONSTRAINT [PK_ProductReturn] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductReturn_OrderDetail_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetail] ([Id])
);
2023-03-10 18:19:09.649 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ReturnPayment] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(max) NOT NULL,
    [ProductReturnId] int NULL,
    CONSTRAINT [PK_ReturnPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReturnPayment_ProductReturn_ProductReturnId] FOREIGN KEY ([ProductReturnId]) REFERENCES [ProductReturn] ([Id])
);
2023-03-10 18:19:09.649 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductReturn_OrderDetailId] ON [ProductReturn] ([OrderDetailId]);
2023-03-10 18:19:09.650 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReturnPayment_ProductReturnId] ON [ReturnPayment] ([ProductReturnId]);
2023-03-10 18:19:09.650 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310111857_AddReturnProductsAndPayments', N'7.0.1');
2023-03-10 18:33:56.950 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:33:57.006 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:33:57.008 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:33:57.008 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:33:57.022 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:33:57.038 +07:00 [INF] No migrations were applied. The database is already up to date.
2023-03-10 18:34:21.864 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:34:21.918 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:34:21.920 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:34:21.921 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:34:21.935 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:34:21.953 +07:00 [INF] Applying migration '20230310113415_AddChat'.
2023-03-10 18:34:22.121 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] ADD [chatId] int NOT NULL DEFAULT 0;
2023-03-10 18:34:22.127 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NOT NULL,
    [employeeId] int NOT NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:41:51.710 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:41:51.762 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:41:51.764 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:41:51.765 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:41:51.779 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:41:51.791 +07:00 [INF] Applying migration '20230310113415_AddChat'.
2023-03-10 18:41:51.955 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] ADD [chatId] int NOT NULL DEFAULT 0;
2023-03-10 18:41:51.961 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NOT NULL,
    [employeeId] int NOT NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:42:13.610 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:42:13.664 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:42:13.666 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:42:13.666 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:42:13.680 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:42:13.696 +07:00 [INF] Applying migration '20230310113415_AddChat'.
2023-03-10 18:42:13.860 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] ADD [chatId] int NOT NULL DEFAULT 0;
2023-03-10 18:42:13.866 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NOT NULL,
    [employeeId] int NOT NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:43:04.780 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:43:04.830 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:43:04.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:43:04.833 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:43:04.849 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:43:04.863 +07:00 [INF] Applying migration '20230310113415_AddChat'.
2023-03-10 18:43:05.047 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Order] ADD [chatId] int NOT NULL DEFAULT 0;
2023-03-10 18:43:05.055 +07:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NOT NULL,
    [employeeId] int NOT NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:44:31.775 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:44:31.830 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:44:31.832 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:44:31.906 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 18:44:31.907 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:44:31.909 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:44:31.914 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:44:31.927 +07:00 [INF] Applying migration '20230310114425_initDB'.
2023-03-10 18:44:32.094 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.095 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.096 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.097 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.098 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.099 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.100 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 18:44:32.102 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:44:32.104 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 18:44:32.114 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2023-03-10 18:49:18.838 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:49:18.886 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:49:18.888 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:49:18.893 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:49:18.909 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:49:18.922 +07:00 [INF] Applying migration '20230310114913_initDB'.
2023-03-10 18:49:19.124 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.125 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.126 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.127 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.128 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.130 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 18:49:19.132 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:49:19.134 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 18:49:19.135 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]),
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2023-03-10 18:49:19.137 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productShipCostId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productSellerAddress] nvarchar(200) NOT NULL,
    [productSellerEmail] nvarchar(200) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:49:19.272 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessage] (
    [Id] int NOT NULL IDENTITY,
    [isFromEmployee] bit NOT NULL,
    [message] nvarchar(max) NOT NULL,
    [ChatId] int NULL,
    CONSTRAINT [PK_ChatMessage] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessage_Chat_ChatId] FOREIGN KEY ([ChatId]) REFERENCES [Chat] ([Id])
);
2023-03-10 18:49:19.275 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [chatId] int NOT NULL,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Chat_chatId] FOREIGN KEY ([chatId]) REFERENCES [Chat] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 18:49:19.278 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [changeDate] datetime2 NOT NULL,
    [productName] nvarchar(max) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] nvarchar(max) NOT NULL,
    [productSellerEmail] nvarchar(max) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    [ProductId] int NULL,
    CONSTRAINT [PK_ProductHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductHistory_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_Product_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Product] ([Id])
);
2023-03-10 18:49:19.279 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductProductTax] (
    [productTaxesId] int NOT NULL,
    [productsId] int NOT NULL,
    CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([productTaxesId], [productsId]),
    CONSTRAINT [FK_ProductProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductProductTax_Product_productsId] FOREIGN KEY ([productsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:49:22.622 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 18:49:22.631 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetail] (
    [Id] int NOT NULL IDENTITY,
    [productId] int NOT NULL,
    [additionalCostId] int NOT NULL,
    [processCost] real NOT NULL,
    [quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderDetail_AdditionalCost_additionalCostId] FOREIGN KEY ([additionalCostId]) REFERENCES [AdditionalCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetail_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id]),
    CONSTRAINT [FK_OrderDetail_ProductHistory_productId] FOREIGN KEY ([productId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:49:22.638 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistoryProductTax] (
    [productHistoriesId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductHistoryProductTax] PRIMARY KEY ([productHistoriesId], [productTaxesId]),
    CONSTRAINT [FK_ProductHistoryProductTax_ProductHistory_productHistoriesId] FOREIGN KEY ([productHistoriesId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistoryProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:49:22.646 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductReturn] (
    [Id] int NOT NULL IDENTITY,
    [isExchangeForNewProduct] bit NOT NULL,
    [returnQuantity] int NOT NULL,
    [returnReason] nvarchar(max) NOT NULL,
    [customerMessage] nvarchar(max) NOT NULL,
    [supplierMessage] nvarchar(max) NOT NULL,
    [shippingStatus] int NOT NULL,
    [shippingEstimatedDay] int NOT NULL,
    [returnCost] real NOT NULL,
    [returnDate] datetime2 NOT NULL,
    [OrderDetailId] int NULL,
    CONSTRAINT [PK_ProductReturn] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductReturn_OrderDetail_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetail] ([Id])
);
2023-03-10 18:49:22.650 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ReturnPayment] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(max) NOT NULL,
    [ProductReturnId] int NULL,
    CONSTRAINT [PK_ReturnPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReturnPayment_ProductReturn_ProductReturnId] FOREIGN KEY ([ProductReturnId]) REFERENCES [ProductReturn] ([Id])
);
2023-03-10 18:49:22.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_customerId] ON [Chat] ([customerId]);
2023-03-10 18:49:22.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_employeeId] ON [Chat] ([employeeId]);
2023-03-10 18:49:22.655 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessage_ChatId] ON [ChatMessage] ([ChatId]);
2023-03-10 18:49:22.657 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_chatId] ON [Order] ([chatId]);
2023-03-10 18:49:22.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 18:49:25.935 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_additionalCostId] ON [OrderDetail] ([additionalCostId]);
2023-03-10 18:49:25.938 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_OrderId] ON [OrderDetail] ([OrderId]);
2023-03-10 18:49:25.941 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_productId] ON [OrderDetail] ([productId]);
2023-03-10 18:49:25.943 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 18:49:25.946 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 18:49:25.949 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 18:49:25.952 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 18:49:25.954 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_currencyExchangeId] ON [ProductHistory] ([currencyExchangeId]);
2023-03-10 18:49:25.957 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productCategoryId] ON [ProductHistory] ([productCategoryId]);
2023-03-10 18:49:25.960 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_ProductId] ON [ProductHistory] ([ProductId]);
2023-03-10 18:49:25.963 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productShipCostId] ON [ProductHistory] ([productShipCostId]);
2023-03-10 18:49:25.965 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistoryProductTax_productTaxesId] ON [ProductHistoryProductTax] ([productTaxesId]);
2023-03-10 18:49:25.968 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productsId] ON [ProductProductTax] ([productsId]);
2023-03-10 18:49:25.971 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductReturn_OrderDetailId] ON [ProductReturn] ([OrderDetailId]);
2023-03-10 18:49:25.974 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 18:49:25.977 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReturnPayment_ProductReturnId] ON [ReturnPayment] ([ProductReturnId]);
2023-03-10 18:49:25.979 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 18:49:25.984 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310114913_initDB', N'7.0.1');
2023-03-10 18:50:38.998 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:50:39.048 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:50:39.050 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:50:39.051 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:50:39.072 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:50:39.086 +07:00 [INF] Applying migration '20230310115030_customerSetNullOnDeleteChat'.
2023-03-10 18:50:39.234 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Chat] DROP CONSTRAINT [FK_Chat_Users_customerId];
2023-03-10 18:50:39.240 +07:00 [ERR] Failed executing DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Chat] ADD CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL;
2023-03-10 18:52:17.961 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:52:18.013 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:52:18.015 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:52:18.016 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:52:18.029 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:52:18.043 +07:00 [INF] Applying migration '20230310115030_customerSetNullOnDeleteChat'.
2023-03-10 18:52:18.185 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Chat] DROP CONSTRAINT [FK_Chat_Users_customerId];
2023-03-10 18:52:18.189 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [Chat] ADD CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL;
2023-03-10 18:53:37.542 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:53:37.604 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:53:37.606 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:53:37.607 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:53:37.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:53:37.641 +07:00 [INF] Applying migration '20230310115330_customerSetNullOnDeleteChat'.
2023-03-10 18:53:37.855 +07:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.230 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:54:26.278 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:54:26.280 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:54:26.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 18:54:26.345 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:54:26.347 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:54:26.350 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:54:26.363 +07:00 [INF] Applying migration '20230310115419_customerSetNullOnDeleteChat'.
2023-03-10 18:54:26.540 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.542 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.543 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.544 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.545 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 18:54:26.547 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:54:26.549 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 18:54:26.561 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2023-03-10 18:55:47.163 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:55:47.220 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:55:47.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:55:47.223 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:55:47.236 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:55:47.249 +07:00 [INF] Applying migration '20230310115419_customerSetNullOnDeleteChat'.
2023-03-10 18:55:47.455 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.457 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.458 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.459 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.460 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.461 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.462 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 18:55:47.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:55:47.465 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 18:55:47.475 +07:00 [ERR] Failed executing DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE SET NULL
);
2023-03-10 18:56:27.502 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:56:27.561 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:56:27.563 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:56:27.628 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 18:56:27.629 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 18:56:27.631 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 18:56:27.635 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 18:56:27.650 +07:00 [INF] Applying migration '20230310115620_customerSetNullOnDeleteChat'.
2023-03-10 18:56:27.823 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.824 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.826 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.827 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.828 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.829 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.831 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 18:56:27.833 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:56:27.834 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 18:56:27.836 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:56:27.838 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productShipCostId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productSellerAddress] nvarchar(200) NOT NULL,
    [productSellerEmail] nvarchar(200) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 18:56:28.257 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessage] (
    [Id] int NOT NULL IDENTITY,
    [isFromEmployee] bit NOT NULL,
    [message] nvarchar(max) NOT NULL,
    [ChatId] int NULL,
    CONSTRAINT [PK_ChatMessage] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessage_Chat_ChatId] FOREIGN KEY ([ChatId]) REFERENCES [Chat] ([Id])
);
2023-03-10 18:56:28.259 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [chatId] int NOT NULL,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Chat_chatId] FOREIGN KEY ([chatId]) REFERENCES [Chat] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 18:56:28.262 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [changeDate] datetime2 NOT NULL,
    [productName] nvarchar(max) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] nvarchar(max) NOT NULL,
    [productSellerEmail] nvarchar(max) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    [ProductId] int NULL,
    CONSTRAINT [PK_ProductHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductHistory_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_Product_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Product] ([Id])
);
2023-03-10 18:56:28.264 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductProductTax] (
    [productTaxesId] int NOT NULL,
    [productsId] int NOT NULL,
    CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([productTaxesId], [productsId]),
    CONSTRAINT [FK_ProductProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductProductTax_Product_productsId] FOREIGN KEY ([productsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:56:31.624 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 18:56:31.628 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetail] (
    [Id] int NOT NULL IDENTITY,
    [productId] int NOT NULL,
    [additionalCostId] int NOT NULL,
    [processCost] real NOT NULL,
    [quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderDetail_AdditionalCost_additionalCostId] FOREIGN KEY ([additionalCostId]) REFERENCES [AdditionalCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetail_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id]),
    CONSTRAINT [FK_OrderDetail_ProductHistory_productId] FOREIGN KEY ([productId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:56:31.632 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistoryProductTax] (
    [productHistoriesId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductHistoryProductTax] PRIMARY KEY ([productHistoriesId], [productTaxesId]),
    CONSTRAINT [FK_ProductHistoryProductTax_ProductHistory_productHistoriesId] FOREIGN KEY ([productHistoriesId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistoryProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE
);
2023-03-10 18:56:31.636 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductReturn] (
    [Id] int NOT NULL IDENTITY,
    [isExchangeForNewProduct] bit NOT NULL,
    [returnQuantity] int NOT NULL,
    [returnReason] nvarchar(max) NOT NULL,
    [customerMessage] nvarchar(max) NOT NULL,
    [supplierMessage] nvarchar(max) NOT NULL,
    [shippingStatus] int NOT NULL,
    [shippingEstimatedDay] int NOT NULL,
    [returnCost] real NOT NULL,
    [returnDate] datetime2 NOT NULL,
    [OrderDetailId] int NULL,
    CONSTRAINT [PK_ProductReturn] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductReturn_OrderDetail_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetail] ([Id])
);
2023-03-10 18:56:31.640 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ReturnPayment] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(max) NOT NULL,
    [ProductReturnId] int NULL,
    CONSTRAINT [PK_ReturnPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReturnPayment_ProductReturn_ProductReturnId] FOREIGN KEY ([ProductReturnId]) REFERENCES [ProductReturn] ([Id])
);
2023-03-10 18:56:31.642 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_customerId] ON [Chat] ([customerId]);
2023-03-10 18:56:31.643 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_employeeId] ON [Chat] ([employeeId]);
2023-03-10 18:56:31.645 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessage_ChatId] ON [ChatMessage] ([ChatId]);
2023-03-10 18:56:31.646 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_chatId] ON [Order] ([chatId]);
2023-03-10 18:56:31.647 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 18:56:34.519 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_additionalCostId] ON [OrderDetail] ([additionalCostId]);
2023-03-10 18:56:34.522 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_OrderId] ON [OrderDetail] ([OrderId]);
2023-03-10 18:56:34.524 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_productId] ON [OrderDetail] ([productId]);
2023-03-10 18:56:34.528 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 18:56:34.530 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 18:56:34.533 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 18:56:34.536 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 18:56:34.539 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_currencyExchangeId] ON [ProductHistory] ([currencyExchangeId]);
2023-03-10 18:56:34.542 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productCategoryId] ON [ProductHistory] ([productCategoryId]);
2023-03-10 18:56:34.544 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_ProductId] ON [ProductHistory] ([ProductId]);
2023-03-10 18:56:34.547 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productShipCostId] ON [ProductHistory] ([productShipCostId]);
2023-03-10 18:56:34.550 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistoryProductTax_productTaxesId] ON [ProductHistoryProductTax] ([productTaxesId]);
2023-03-10 18:56:34.552 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productsId] ON [ProductProductTax] ([productsId]);
2023-03-10 18:56:34.555 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductReturn_OrderDetailId] ON [ProductReturn] ([OrderDetailId]);
2023-03-10 18:56:34.557 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 18:56:34.559 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReturnPayment_ProductReturnId] ON [ReturnPayment] ([ProductReturnId]);
2023-03-10 18:56:34.562 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 18:56:34.565 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310115620_customerSetNullOnDeleteChat', N'7.0.1');
2023-03-10 19:07:56.155 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:07:56.214 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:07:56.216 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:07:56.217 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:07:56.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 19:07:56.249 +07:00 [INF] Applying migration '20230310120746_AddShipper'.
2023-03-10 19:07:56.396 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310120746_AddShipper', N'7.0.1');
2023-03-10 19:13:27.801 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:13:27.848 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:13:27.850 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:13:27.851 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:13:27.865 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 19:13:27.877 +07:00 [INF] Applying migration '20230310121320_AddShipper'.
2023-03-10 19:13:28.067 +07:00 [ERR] Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.024 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:14:09.076 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:14:09.077 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:14:09.142 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 19:14:09.143 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:14:09.144 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:14:09.149 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 19:14:09.160 +07:00 [INF] Applying migration '20230310121403_AddShipper'.
2023-03-10 19:14:09.354 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.355 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 19:14:09.362 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:14:09.365 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 19:14:09.367 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:14:09.369 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Shipper] (
    [Id] int NOT NULL IDENTITY,
    [shippingDistrict] nvarchar(max) NOT NULL,
    [shippingStartTime] datetime2 NOT NULL,
    [shippingEndTime] datetime2 NOT NULL,
    [shippingStatus] int NOT NULL,
    [userId] int NOT NULL,
    CONSTRAINT [PK_Shipper] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Shipper_Users_userId] FOREIGN KEY ([userId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:14:09.733 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productShipCostId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productSellerAddress] nvarchar(200) NOT NULL,
    [productSellerEmail] nvarchar(200) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:14:09.735 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessage] (
    [Id] int NOT NULL IDENTITY,
    [isFromEmployee] bit NOT NULL,
    [message] nvarchar(max) NOT NULL,
    [ChatId] int NULL,
    CONSTRAINT [PK_ChatMessage] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessage_Chat_ChatId] FOREIGN KEY ([ChatId]) REFERENCES [Chat] ([Id])
);
2023-03-10 19:14:09.738 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [chatId] int NOT NULL,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Chat_chatId] FOREIGN KEY ([chatId]) REFERENCES [Chat] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 19:14:09.743 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [changeDate] datetime2 NOT NULL,
    [productName] nvarchar(max) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] nvarchar(max) NOT NULL,
    [productSellerEmail] nvarchar(max) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    [ProductId] int NULL,
    CONSTRAINT [PK_ProductHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductHistory_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_Product_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Product] ([Id])
);
2023-03-10 19:14:13.455 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductProductTax] (
    [productTaxesId] int NOT NULL,
    [productsId] int NOT NULL,
    CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([productTaxesId], [productsId]),
    CONSTRAINT [FK_ProductProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductProductTax_Product_productsId] FOREIGN KEY ([productsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:14:13.459 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 19:14:13.465 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetail] (
    [Id] int NOT NULL IDENTITY,
    [productId] int NOT NULL,
    [additionalCostId] int NOT NULL,
    [processCost] real NOT NULL,
    [quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderDetail_AdditionalCost_additionalCostId] FOREIGN KEY ([additionalCostId]) REFERENCES [AdditionalCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetail_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id]),
    CONSTRAINT [FK_OrderDetail_ProductHistory_productId] FOREIGN KEY ([productId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:14:13.469 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistoryProductTax] (
    [productHistoriesId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductHistoryProductTax] PRIMARY KEY ([productHistoriesId], [productTaxesId]),
    CONSTRAINT [FK_ProductHistoryProductTax_ProductHistory_productHistoriesId] FOREIGN KEY ([productHistoriesId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistoryProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:14:13.473 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductReturn] (
    [Id] int NOT NULL IDENTITY,
    [isExchangeForNewProduct] bit NOT NULL,
    [returnQuantity] int NOT NULL,
    [returnReason] nvarchar(max) NOT NULL,
    [customerMessage] nvarchar(max) NOT NULL,
    [supplierMessage] nvarchar(max) NOT NULL,
    [shippingStatus] int NOT NULL,
    [shippingEstimatedDay] int NOT NULL,
    [returnCost] real NOT NULL,
    [returnDate] datetime2 NOT NULL,
    [OrderDetailId] int NULL,
    CONSTRAINT [PK_ProductReturn] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductReturn_OrderDetail_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetail] ([Id])
);
2023-03-10 19:14:13.477 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ReturnPayment] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(max) NOT NULL,
    [ProductReturnId] int NULL,
    CONSTRAINT [PK_ReturnPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReturnPayment_ProductReturn_ProductReturnId] FOREIGN KEY ([ProductReturnId]) REFERENCES [ProductReturn] ([Id])
);
2023-03-10 19:14:13.478 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_customerId] ON [Chat] ([customerId]);
2023-03-10 19:14:16.928 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_employeeId] ON [Chat] ([employeeId]);
2023-03-10 19:14:16.930 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessage_ChatId] ON [ChatMessage] ([ChatId]);
2023-03-10 19:14:16.932 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_chatId] ON [Order] ([chatId]);
2023-03-10 19:14:16.934 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 19:14:16.935 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_additionalCostId] ON [OrderDetail] ([additionalCostId]);
2023-03-10 19:14:16.937 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_OrderId] ON [OrderDetail] ([OrderId]);
2023-03-10 19:14:16.938 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_productId] ON [OrderDetail] ([productId]);
2023-03-10 19:14:16.940 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 19:14:16.942 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 19:14:16.944 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 19:14:16.945 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 19:14:16.946 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_currencyExchangeId] ON [ProductHistory] ([currencyExchangeId]);
2023-03-10 19:14:16.947 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productCategoryId] ON [ProductHistory] ([productCategoryId]);
2023-03-10 19:14:16.948 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_ProductId] ON [ProductHistory] ([ProductId]);
2023-03-10 19:14:16.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productShipCostId] ON [ProductHistory] ([productShipCostId]);
2023-03-10 19:14:16.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistoryProductTax_productTaxesId] ON [ProductHistoryProductTax] ([productTaxesId]);
2023-03-10 19:14:16.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productsId] ON [ProductProductTax] ([productsId]);
2023-03-10 19:14:16.951 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductReturn_OrderDetailId] ON [ProductReturn] ([OrderDetailId]);
2023-03-10 19:14:16.952 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 19:14:16.953 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReturnPayment_ProductReturnId] ON [ReturnPayment] ([ProductReturnId]);
2023-03-10 19:14:16.954 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Shipper_userId] ON [Shipper] ([userId]);
2023-03-10 19:14:16.955 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 19:14:16.957 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310121403_AddShipper', N'7.0.1');
2023-03-10 19:26:50.824 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:26:50.872 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:26:50.875 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:26:50.949 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [__EFMigrationsHistory] (
    [MigrationId] nvarchar(150) NOT NULL,
    [ProductVersion] nvarchar(32) NOT NULL,
    CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
);
2023-03-10 19:26:50.951 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2023-03-10 19:26:50.953 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2023-03-10 19:26:50.957 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2023-03-10 19:26:50.971 +07:00 [INF] Applying migration '20230310122644_InitDB'.
2023-03-10 19:26:51.169 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [AdditionalCost] (
    [Id] int NOT NULL IDENTITY,
    [condition] nvarchar(max) NOT NULL,
    [cost] real NOT NULL,
    CONSTRAINT [PK_AdditionalCost] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.172 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Contributors] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_Contributors] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [CurrencyExchange] (
    [Id] int NOT NULL IDENTITY,
    [fromCurrency] nvarchar(max) NOT NULL,
    [rate] real NOT NULL,
    CONSTRAINT [PK_CurrencyExchange] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.174 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductCategory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryName] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_ProductCategory] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.175 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductTax] (
    [Id] int NOT NULL IDENTITY,
    [taxName] nvarchar(100) NOT NULL,
    [taxPrice] real NOT NULL,
    CONSTRAINT [PK_ProductTax] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.176 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Projects] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Priority] int NOT NULL,
    CONSTRAINT [PK_Projects] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.177 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Users] (
    [Id] int NOT NULL IDENTITY,
    [guid] nvarchar(100) NOT NULL,
    [passwordHash] nvarchar(300) NOT NULL,
    [passwordSalt] nvarchar(100) NOT NULL,
    [firstname] nvarchar(100) NOT NULL,
    [lastname] nvarchar(100) NOT NULL,
    [dateOfBirth] datetime2 NOT NULL,
    [address] nvarchar(300) NOT NULL,
    [verify] int NOT NULL,
    [role] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2023-03-10 19:26:51.178 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductShipCost] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [productCategoryId] int NOT NULL,
    CONSTRAINT [PK_ProductShipCost] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductShipCost_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:26:51.180 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ToDoItems] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(max) NOT NULL,
    [Description] nvarchar(max) NOT NULL,
    [ContributorId] int NULL,
    [IsDone] bit NOT NULL,
    [ProjectId] int NULL,
    CONSTRAINT [PK_ToDoItems] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ToDoItems_Projects_ProjectId] FOREIGN KEY ([ProjectId]) REFERENCES [Projects] ([Id])
);
2023-03-10 19:26:51.181 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Chat] (
    [Id] int NOT NULL IDENTITY,
    [customerId] int NULL,
    [employeeId] int NULL,
    CONSTRAINT [PK_Chat] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Chat_Users_customerId] FOREIGN KEY ([customerId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION,
    CONSTRAINT [FK_Chat_Users_employeeId] FOREIGN KEY ([employeeId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:26:51.183 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Shipper] (
    [Id] int NOT NULL IDENTITY,
    [shippingDistrict] nvarchar(max) NOT NULL,
    [shippingStartTime] datetime2 NOT NULL,
    [shippingEndTime] datetime2 NOT NULL,
    [shippingStatus] int NOT NULL,
    [userId] int NOT NULL,
    CONSTRAINT [PK_Shipper] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Shipper_Users_userId] FOREIGN KEY ([userId]) REFERENCES [Users] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:26:51.481 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Product] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [productShipCostId] int NOT NULL,
    [productName] nvarchar(200) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productSellerAddress] nvarchar(200) NOT NULL,
    [productSellerEmail] nvarchar(200) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    CONSTRAINT [PK_Product] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Product_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Product_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE NO ACTION
);
2023-03-10 19:26:51.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ChatMessage] (
    [Id] int NOT NULL IDENTITY,
    [isFromEmployee] bit NOT NULL,
    [message] nvarchar(max) NOT NULL,
    [ChatId] int NULL,
    CONSTRAINT [PK_ChatMessage] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ChatMessage_Chat_ChatId] FOREIGN KEY ([ChatId]) REFERENCES [Chat] ([Id])
);
2023-03-10 19:26:51.485 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Order] (
    [Id] int NOT NULL IDENTITY,
    [chatId] int NOT NULL,
    [orderDate] datetime2 NOT NULL,
    [status] int NOT NULL,
    [orderDescription] nvarchar(300) NOT NULL,
    [customerDescription] nvarchar(300) NOT NULL,
    [deliveryAddress] nvarchar(max) NOT NULL,
    [contactPhonenumber] nvarchar(max) NOT NULL,
    [shippingEstimatedDays] int NOT NULL,
    [UserId] int NULL,
    [price] real NOT NULL,
    CONSTRAINT [PK_Order] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Order_Chat_chatId] FOREIGN KEY ([chatId]) REFERENCES [Chat] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_Order_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id])
);
2023-03-10 19:26:51.488 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistory] (
    [Id] int NOT NULL IDENTITY,
    [productCategoryId] int NOT NULL,
    [changeDate] datetime2 NOT NULL,
    [productName] nvarchar(max) NOT NULL,
    [productImageUrl] nvarchar(max) NOT NULL,
    [productDescription] nvarchar(max) NOT NULL,
    [productPrice] real NOT NULL,
    [productURL] nvarchar(max) NOT NULL,
    [productWeight] real NOT NULL,
    [productShipCostId] int NOT NULL,
    [productSellerAddress] nvarchar(max) NOT NULL,
    [productSellerEmail] nvarchar(max) NOT NULL,
    [productWarrantable] bit NOT NULL,
    [productWarrantyDescription] nvarchar(max) NOT NULL,
    [productWarrantyDuration] int NOT NULL,
    [productReturnable] bit NOT NULL,
    [productReturnDescription] nvarchar(max) NOT NULL,
    [productReturnDuration] int NOT NULL,
    [currencyExchangeId] int NOT NULL,
    [ProductId] int NULL,
    CONSTRAINT [PK_ProductHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductHistory_CurrencyExchange_currencyExchangeId] FOREIGN KEY ([currencyExchangeId]) REFERENCES [CurrencyExchange] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductCategory_productCategoryId] FOREIGN KEY ([productCategoryId]) REFERENCES [ProductCategory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_ProductShipCost_productShipCostId] FOREIGN KEY ([productShipCostId]) REFERENCES [ProductShipCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistory_Product_ProductId] FOREIGN KEY ([ProductId]) REFERENCES [Product] ([Id])
);
2023-03-10 19:26:54.849 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductProductTax] (
    [productTaxesId] int NOT NULL,
    [productsId] int NOT NULL,
    CONSTRAINT [PK_ProductProductTax] PRIMARY KEY ([productTaxesId], [productsId]),
    CONSTRAINT [FK_ProductProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductProductTax_Product_productsId] FOREIGN KEY ([productsId]) REFERENCES [Product] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:26:54.853 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderPayment] (
    [Id] int NOT NULL IDENTITY,
    [paymentStatus] int NOT NULL,
    [paymentCost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(300) NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderPayment_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id])
);
2023-03-10 19:26:54.857 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderShipping] (
    [Id] int NOT NULL IDENTITY,
    [orderId] int NOT NULL,
    [shipperId] int NOT NULL,
    [shippingUsing3rd] bit NOT NULL,
    [orderShippingStatus] int NOT NULL,
    [shippingDescription] nvarchar(max) NOT NULL,
    [signatureImageUrl] nvarchar(max) NOT NULL,
    CONSTRAINT [PK_OrderShipping] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderShipping_Order_orderId] FOREIGN KEY ([orderId]) REFERENCES [Order] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderShipping_Shipper_shipperId] FOREIGN KEY ([shipperId]) REFERENCES [Shipper] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:26:54.863 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [OrderDetail] (
    [Id] int NOT NULL IDENTITY,
    [productId] int NOT NULL,
    [additionalCostId] int NOT NULL,
    [processCost] real NOT NULL,
    [quantity] int NOT NULL,
    [OrderId] int NULL,
    CONSTRAINT [PK_OrderDetail] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_OrderDetail_AdditionalCost_additionalCostId] FOREIGN KEY ([additionalCostId]) REFERENCES [AdditionalCost] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_OrderDetail_Order_OrderId] FOREIGN KEY ([OrderId]) REFERENCES [Order] ([Id]),
    CONSTRAINT [FK_OrderDetail_ProductHistory_productId] FOREIGN KEY ([productId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:26:54.867 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductHistoryProductTax] (
    [productHistoriesId] int NOT NULL,
    [productTaxesId] int NOT NULL,
    CONSTRAINT [PK_ProductHistoryProductTax] PRIMARY KEY ([productHistoriesId], [productTaxesId]),
    CONSTRAINT [FK_ProductHistoryProductTax_ProductHistory_productHistoriesId] FOREIGN KEY ([productHistoriesId]) REFERENCES [ProductHistory] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_ProductHistoryProductTax_ProductTax_productTaxesId] FOREIGN KEY ([productTaxesId]) REFERENCES [ProductTax] ([Id]) ON DELETE CASCADE
);
2023-03-10 19:26:54.871 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ProductReturn] (
    [Id] int NOT NULL IDENTITY,
    [isExchangeForNewProduct] bit NOT NULL,
    [returnQuantity] int NOT NULL,
    [returnReason] nvarchar(max) NOT NULL,
    [customerMessage] nvarchar(max) NOT NULL,
    [supplierMessage] nvarchar(max) NOT NULL,
    [shippingStatus] int NOT NULL,
    [shippingEstimatedDay] int NOT NULL,
    [returnCost] real NOT NULL,
    [returnDate] datetime2 NOT NULL,
    [OrderDetailId] int NULL,
    CONSTRAINT [PK_ProductReturn] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ProductReturn_OrderDetail_OrderDetailId] FOREIGN KEY ([OrderDetailId]) REFERENCES [OrderDetail] ([Id])
);
2023-03-10 19:26:58.077 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [ReturnPayment] (
    [Id] int NOT NULL IDENTITY,
    [cost] real NOT NULL,
    [paymentDate] datetime2 NOT NULL,
    [paymentDescription] nvarchar(max) NOT NULL,
    [ProductReturnId] int NULL,
    CONSTRAINT [PK_ReturnPayment] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_ReturnPayment_ProductReturn_ProductReturnId] FOREIGN KEY ([ProductReturnId]) REFERENCES [ProductReturn] ([Id])
);
2023-03-10 19:26:58.080 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_customerId] ON [Chat] ([customerId]);
2023-03-10 19:26:58.083 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Chat_employeeId] ON [Chat] ([employeeId]);
2023-03-10 19:26:58.086 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ChatMessage_ChatId] ON [ChatMessage] ([ChatId]);
2023-03-10 19:26:58.089 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_chatId] ON [Order] ([chatId]);
2023-03-10 19:26:58.093 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Order_UserId] ON [Order] ([UserId]);
2023-03-10 19:26:58.095 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_additionalCostId] ON [OrderDetail] ([additionalCostId]);
2023-03-10 19:26:58.098 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_OrderId] ON [OrderDetail] ([OrderId]);
2023-03-10 19:26:58.101 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderDetail_productId] ON [OrderDetail] ([productId]);
2023-03-10 19:26:58.104 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderPayment_OrderId] ON [OrderPayment] ([OrderId]);
2023-03-10 19:26:58.106 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderShipping_orderId] ON [OrderShipping] ([orderId]);
2023-03-10 19:26:58.108 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_OrderShipping_shipperId] ON [OrderShipping] ([shipperId]);
2023-03-10 19:26:58.109 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_currencyExchangeId] ON [Product] ([currencyExchangeId]);
2023-03-10 19:26:58.110 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productCategoryId] ON [Product] ([productCategoryId]);
2023-03-10 19:26:58.112 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Product_productShipCostId] ON [Product] ([productShipCostId]);
2023-03-10 19:26:58.113 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_currencyExchangeId] ON [ProductHistory] ([currencyExchangeId]);
2023-03-10 19:26:58.114 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productCategoryId] ON [ProductHistory] ([productCategoryId]);
2023-03-10 19:26:58.116 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_ProductId] ON [ProductHistory] ([ProductId]);
2023-03-10 19:26:58.118 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistory_productShipCostId] ON [ProductHistory] ([productShipCostId]);
2023-03-10 19:26:58.119 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductHistoryProductTax_productTaxesId] ON [ProductHistoryProductTax] ([productTaxesId]);
2023-03-10 19:26:58.121 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductProductTax_productsId] ON [ProductProductTax] ([productsId]);
2023-03-10 19:26:58.122 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ProductReturn_OrderDetailId] ON [ProductReturn] ([OrderDetailId]);
2023-03-10 19:27:01.335 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_ProductShipCost_productCategoryId] ON [ProductShipCost] ([productCategoryId]);
2023-03-10 19:27:01.338 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ReturnPayment_ProductReturnId] ON [ReturnPayment] ([ProductReturnId]);
2023-03-10 19:27:01.340 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Shipper_userId] ON [Shipper] ([userId]);
2023-03-10 19:27:01.343 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_ToDoItems_ProjectId] ON [ToDoItems] ([ProjectId]);
2023-03-10 19:27:01.348 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20230310122644_InitDB', N'7.0.1');
